# ==============================================================================
# CONFIGURAÇÃO PADRÃO PARA MELHORIAS DE DESEMPENHO, SEGURANÇA E SEO
# ==============================================================================

# Defina a página de índice padrão do diretório.
DirectoryIndex login.php

# ------------------------------------------------------------------------------
# MELHORIAS DE DESEMPENHO
# ------------------------------------------------------------------------------

<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/plain
  AddOutputFilterByType DEFLATE text/html
  AddOutputFilterByType DEFLATE text/xml
  AddOutputFilterByType DEFLATE text/css
  AddOutputFilterByType DEFLATE application/xml
  AddOutputFilterByType DEFLATE application/xhtml+xml
  AddOutputFilterByType DEFLATE application/rss+xml
  AddOutputFilterByType DEFLATE application/javascript
  AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>

<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType image/jpg "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/gif "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/svg+xml "access plus 1 year"
  ExpiresByType image/webp "access plus 1 year"
  ExpiresByType text/css "access plus 1 month"
  ExpiresByType application/javascript "access plus 1 month"
  ExpiresByType application/pdf "access plus 1 month"
  ExpiresByType image/x-icon "access plus 1 year"
  ExpiresDefault "access plus 2 days"
</IfModule>

# ------------------------------------------------------------------------------
# MELHORIAS DE SEGURANÇA
# ------------------------------------------------------------------------------

Options -Indexes

<Files ".htaccess">
  Require all denied
</Files>

# ------------------------------------------------------------------------------
# REGRAS DE ROTEAMENTO (AJUSTE PRINCIPAL)
# ------------------------------------------------------------------------------

# Ativa o motor de reescrita de URL
RewriteEngine On

# --- INÍCIO DA CORREÇÃO ---

# 1. (A SOLUÇÃO)
# Se a requisição FOR para a pasta /api/, pare de reescrever e sirva o arquivo.
# O [L] significa "Última Regra" - pare de processar.
# O [-] (hífen) significa "não reescreva a URL".
RewriteRule ^api/ - [L]

# 2. (REGRA DE ROTEAMENTO)
# Para todo o resto, envie para o index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [L,QSA]

# --- FIM DA CORREÇÃO ---

# ... (Suas outras regras de SEO opcionais podem vir aqui) ...

# ==============================================================================
# FIM DA CONFIGURAÇÃO
# ==============================================================================